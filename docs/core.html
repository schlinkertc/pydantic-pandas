---

title: pydantic-pandas


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>in DF Meta __new__
BaseFrame
(&lt;class &#39;pydantic.main.BaseModel&#39;&gt;, &lt;class &#39;pydantic_pandas.core.PandasDataFrame&#39;&gt;)
{&#39;__module__&#39;: &#39;pydantic_pandas.core&#39;, &#39;__qualname__&#39;: &#39;BaseFrame&#39;, &#39;__doc__&#39;: &#39;Doc from BaseFame&#39;, &#39;__init__&#39;: &lt;function BaseFrame.__init__ at 0x7fc139099b00&gt;, &#39;_base_frame_root_validator&#39;: &lt;classmethod object at 0x7fc1390ab410&gt;, &#39;__classcell__&#39;: &lt;cell at 0x7fc1390ab350: empty&gt;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="TypedArray" class="doc_header"><code>class</code> <code>TypedArray</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L19" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>TypedArray</code>(<strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>index</code></strong>=<em><code>None</code></em>, <strong><code>dtype</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>copy</code></strong>=<em><code>False</code></em>, <strong><code>fastpath</code></strong>=<em><code>False</code></em>) :: <code>Series</code></p>
</blockquote>
<p>One-dimensional ndarray with axis labels (including time series).</p>
<p>Labels need not be unique but must be a hashable type. The object
supports both integer- and label-based indexing and provides a host of
methods for performing operations involving the index. Statistical
methods from ndarray have been overridden to automatically exclude
missing data (currently represented as NaN).</p>
<p>Operations between Series (+, -, /, *, **) align values based on their
associated index values-- they need not be the same length. The result
index will be the sorted union of the two indexes.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>data : array-like, Iterable, dict, or scalar value
    Contains data stored in Series. If data is a dict, argument order is
    maintained.
index : array-like or Index (1d)
    Values must be hashable and have the same length as <code>data</code>.
    Non-unique index values are allowed. Will default to
    RangeIndex (0, 1, 2, ..., n) if not provided. If data is dict-like
    and index is None, then the keys in the data are used as the index. If the
    index is not None, the resulting Series is reindexed with the index values.
dtype : str, numpy.dtype, or ExtensionDtype, optional
    Data type for the output Series. If not specified, this will be
    inferred from <code>data</code>.
    See the :ref:<code>user guide &lt;basics.dtypes&gt;</code> for more usages.
name : str, optional
    The name to give to the Series.
copy : bool, default False
    Copy input data.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><p>Constructing Series from a dictionary with an Index specified</p>
<blockquote><blockquote><blockquote><p>d = {'a': 1, 'b': 2, 'c': 3}
ser = pd.Series(data=d, index=['a', 'b', 'c'])
ser
a   1
b   2
c   3
dtype: int64</p>
</blockquote>
</blockquote>
</blockquote>
<p>The keys of the dictionary match with the Index values, hence the Index
values have no effect.</p>
<blockquote><blockquote><blockquote><p>d = {'a': 1, 'b': 2, 'c': 3}
ser = pd.Series(data=d, index=['x', 'y', 'z'])
ser
x   NaN
y   NaN
z   NaN
dtype: float64</p>
</blockquote>
</blockquote>
</blockquote>
<p>Note that the Index is first build with the keys from the dictionary.
After this the Series is reindexed with the given Index values, hence we
get all NaN as a result.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ArrayMeta" class="doc_header"><code>class</code> <code>ArrayMeta</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L37" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ArrayMeta</code>() :: <code>type</code></p>
</blockquote>
<p>type(object_or_name, bases, dict)
type(object) -&gt; the object's type
type(name, bases, dict) -&gt; a new type</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Array" class="doc_header"><code>class</code> <code>Array</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L41" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Array</code>(<strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>index</code></strong>=<em><code>None</code></em>, <strong><code>dtype</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>copy</code></strong>=<em><code>False</code></em>, <strong><code>fastpath</code></strong>=<em><code>False</code></em>) :: <code>Series</code></p>
</blockquote>
<p>One-dimensional ndarray with axis labels (including time series).</p>
<p>Labels need not be unique but must be a hashable type. The object
supports both integer- and label-based indexing and provides a host of
methods for performing operations involving the index. Statistical
methods from ndarray have been overridden to automatically exclude
missing data (currently represented as NaN).</p>
<p>Operations between Series (+, -, /, *, **) align values based on their
associated index values-- they need not be the same length. The result
index will be the sorted union of the two indexes.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>data : array-like, Iterable, dict, or scalar value
    Contains data stored in Series. If data is a dict, argument order is
    maintained.
index : array-like or Index (1d)
    Values must be hashable and have the same length as <code>data</code>.
    Non-unique index values are allowed. Will default to
    RangeIndex (0, 1, 2, ..., n) if not provided. If data is dict-like
    and index is None, then the keys in the data are used as the index. If the
    index is not None, the resulting Series is reindexed with the index values.
dtype : str, numpy.dtype, or ExtensionDtype, optional
    Data type for the output Series. If not specified, this will be
    inferred from <code>data</code>.
    See the :ref:<code>user guide &lt;basics.dtypes&gt;</code> for more usages.
name : str, optional
    The name to give to the Series.
copy : bool, default False
    Copy input data.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><p>Constructing Series from a dictionary with an Index specified</p>
<blockquote><blockquote><blockquote><p>d = {'a': 1, 'b': 2, 'c': 3}
ser = pd.Series(data=d, index=['a', 'b', 'c'])
ser
a   1
b   2
c   3
dtype: int64</p>
</blockquote>
</blockquote>
</blockquote>
<p>The keys of the dictionary match with the Index values, hence the Index
values have no effect.</p>
<blockquote><blockquote><blockquote><p>d = {'a': 1, 'b': 2, 'c': 3}
ser = pd.Series(data=d, index=['x', 'y', 'z'])
ser
x   NaN
y   NaN
z   NaN
dtype: float64</p>
</blockquote>
</blockquote>
</blockquote>
<p>Note that the Index is first build with the keys from the dictionary.
After this the Series is reindexed with the given Index values, hence we
get all NaN as a result.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="conarray" class="doc_header"><code>conarray</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>conarray</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PandasDataFrame" class="doc_header"><code>class</code> <code>PandasDataFrame</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L50" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PandasDataFrame</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <code>DataFrame</code></p>
</blockquote>
<p>Pandas DataFrame Validation</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataFrameModelMetaclass" class="doc_header"><code>class</code> <code>DataFrameModelMetaclass</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L94" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataFrameModelMetaclass</code>(<strong><code>name</code></strong>, <strong><code>bases</code></strong>, <strong><code>dct</code></strong>) :: <code>ModelMetaclass</code></p>
</blockquote>
<p>Metaclass for defining Abstract Base Classes (ABCs).</p>
<p>Use this metaclass to create an ABC.  An ABC can be subclassed
directly, and then acts as a mix-in class.  You can also register
unrelated concrete classes (even built-in classes) and unrelated
ABCs as 'virtual subclasses' -- these and their descendants will
be considered subclasses of the registering ABC by the built-in
issubclass() function, but the registering ABC won't show up in
their MRO (Method Resolution Order) nor will method
implementations defined by the registering ABC be callable (not
even via super()).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="BaseFrame" class="doc_header"><code>class</code> <code>BaseFrame</code><a href="https://github.com/schlinkertc/pydantic_pandas/tree/master/pydantic_pandas/core.py#L123" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>BaseFrame</code>(<strong>*<code>args</code></strong>) :: <code>BaseModel</code></p>
</blockquote>
<p>Doc from BaseFame</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>in DF Meta __new__
BaseFrame
(&lt;class &#39;pydantic.main.BaseModel&#39;&gt;, &lt;class &#39;__main__.PandasDataFrame&#39;&gt;)
{&#39;__module__&#39;: &#39;__main__&#39;, &#39;__qualname__&#39;: &#39;BaseFrame&#39;, &#39;__doc__&#39;: &#39;Doc from BaseFame&#39;, &#39;__init__&#39;: &lt;function BaseFrame.__init__ at 0x7fbb2d226c20&gt;, &#39;_base_frame_root_validator&#39;: &lt;classmethod object at 0x7fbb2d230650&gt;, &#39;__classcell__&#39;: &lt;cell at 0x7fbb2d2304d0: empty&gt;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">MovieModel</span><span class="p">(</span><span class="n">BaseFrame</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>in DF Meta __new__
MovieModel
(&lt;class &#39;__main__.BaseFrame&#39;&gt;,)
{&#39;__module__&#39;: &#39;__main__&#39;, &#39;__qualname__&#39;: &#39;MovieModel&#39;, &#39;__annotations__&#39;: {&#39;title&#39;: &lt;class &#39;__main__.ConstrainedArray&#39;&gt;, &#39;year&#39;: &lt;class &#39;__main__.ConstrainedArray&#39;&gt;}}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">MovieModel</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>__main__.MovieModel</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movies</span> <span class="o">=</span> <span class="n">MovieModel</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Cocktail&#39;</span><span class="p">,</span><span class="s1">&#39;Cheers&#39;</span><span class="p">,</span><span class="s1">&#39;That Thing You Do!&#39;</span><span class="p">],</span>
        <span class="n">year</span><span class="o">=</span><span class="p">[</span><span class="mi">1988</span><span class="p">,</span><span class="mi">1982</span><span class="p">,</span><span class="mi">1996</span><span class="p">]</span>
    <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>base frame init
validating array
[&#39;Cocktail&#39;, &#39;Cheers&#39;, &#39;That Thing You Do!&#39;]
validating array
[1988, 1982, 1996]
In Base Frame Root validator
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movies</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Cocktail</td>
      <td>1988</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Cheers</td>
      <td>1982</td>
    </tr>
    <tr>
      <th>2</th>
      <td>That Thing You Do!</td>
      <td>1996</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">MovieModel</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">movies</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;records&#39;</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I wish this worked&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>base frame init
In Base Frame Root validator
I wish this worked
2 validation errors for MovieModel
title
  field required (type=value_error.missing)
year
  field required (type=value_error.missing)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-about-Sub-classing-?">How about Sub-classing ?<a class="anchor-link" href="#How-about-Sub-classing-?"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">DetailedMovieModel</span><span class="p">(</span><span class="n">MovieModel</span><span class="p">):</span>
    <span class="n">review</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">stars</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>in DF Meta __new__
DetailedMovieModel
(&lt;class &#39;__main__.MovieModel&#39;&gt;,)
{&#39;__module__&#39;: &#39;__main__&#39;, &#39;__qualname__&#39;: &#39;DetailedMovieModel&#39;, &#39;__annotations__&#39;: {&#39;review&#39;: &lt;class &#39;__main__.ConstrainedArray&#39;&gt;, &#39;stars&#39;: &lt;class &#39;__main__.ConstrainedArray&#39;&gt;}}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">DetailedMovieModel</span><span class="p">(</span>
    <span class="n">review</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Perfect&#39;</span><span class="p">,</span><span class="s1">&#39;Amazing&#39;</span><span class="p">,</span><span class="s1">&#39;The Best&#39;</span><span class="p">],</span>
    <span class="n">stars</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span>
    <span class="o">**</span><span class="n">movies</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span>
        <span class="n">include</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="n">movies</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>base frame init
validating array
0              Cocktail
1                Cheers
2    That Thing You Do!
dtype: object
validating array
0    1988
1    1982
2    1996
dtype: int64
validating array
[&#39;Perfect&#39;, &#39;Amazing&#39;, &#39;The Best&#39;]
validating array
[10, 10, 10]
In Base Frame Root validator
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>year</th>
      <th>review</th>
      <th>stars</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Cocktail</td>
      <td>1988</td>
      <td>Perfect</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Cheers</td>
      <td>1982</td>
      <td>Amazing</td>
      <td>10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>That Thing You Do!</td>
      <td>1996</td>
      <td>The Best</td>
      <td>10</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>nbdev_build_lib
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_core.ipynb.
Converted 98_utils.ipynb.
Converted 99_default_standard_lib.ipynb.
Converted core.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

